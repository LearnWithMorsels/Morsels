.card {
  width: 100%;
  height: 100%;

  @include flexbox-vertical;
  align-items: center;
  justify-content: center;

  overflow: hidden;

  -webkit-box-sizing: border-box;
  box-sizing: border-box;

  position: absolute;
  top: 0;
  left: 0;

  background-color: #FFF;

  border-radius: $card-border-radius;

  @include shadow-2;

  transform: translate3d(0, 0, 0) scale(pow($card-scale-below, 3)) translateY($card-shift-below * 3);
  transform-origin: 50% 100%;

  transition: top $card-return ease-out, left $card-return ease-out, background-color 1000ms, box-shadow $card-place-down cubic-bezier(.25,.8,.25,1), transform $card-move-up, opacity $card-dismiss, z-index $card-dismiss;

  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;

  opacity: 0;

  z-index: 1;

  &:first-child {
    transform: none;

    opacity: 1;

    + .card {
      transform: scale($card-scale-below) translateY($card-shift-below);

      opacity: 1;

      + .card {
        transform: scale(pow($card-scale-below, 2)) translateY($card-shift-below * 2);

        opacity: 1;
      }
    }
  }

  &.complete {
    background-color: #CCC;

    cursor: move;
    cursor: grab;
    cursor: -moz-grab;
    cursor: -webkit-grab;

    &.correct {
      background-color: #CFC;
    }
  }

  &.dismissed {
    transition: top $card-dismiss, left $card-dismiss, visibility 1ms $card-dismiss, transform 1ms $card-dismiss, opacity $card-dismiss, z-index $card-dismiss;

    visibility: hidden;

    opacity: 0;

    z-index: 3 !important;

    + .card + .card + .card {
      transform: scale(pow($card-scale-below, 2)) translateY($card-shift-below * 2);

      opacity: 1;
    }

    &.card + .card + .card {
      transform: scale($card-scale-below) translateY($card-shift-below);

      opacity: 1;
    }

    &.card.card + .card {
      transform: translate(0, 0);

      opacity: 1;
    }
  }

  &.dragging {
    @include shadow-8;

    transform: scale(1 / $card-scale-below) !important;
    transform-origin: 50% 50%;

    transition: box-shadow $card-pick-up cubic-bezier(.25,.8,.25,1), transform $card-move-up, opacity $card-dismiss, z-index $card-dismiss;

    cursor: grabbing;
    cursor: -moz-grabbing;
    cursor: -webkit-grabbing;

    z-index: 2;
  }

  button {
    &.show-activities,
    &.hide-activities,
    &.save-card {
      position: absolute;
    }

    &.show-activities {
      width: 48px;
      height: 48px;

      right: 18px;
      bottom: 18px;

      color: #FFF;

      background-color: $primary;

      border: none;
      border-radius: 100%;

      box-shadow: 0 0 0 0 $primary;

      transition: right 1ms $activities-fade-out, color $activities-transition-out $activities-fade-out, box-shadow $activities-transition-out $activities-fade-out;

      z-index: 2;
    }

    &.hide-activities {
      width: 30px;
      height: 30px;

      top: 18px;
      right: -36px;

      color: #FFF;

      background: none;

      border: none;

      transition: right $activities-fade-out;

      z-index: 4;
    }

    &.save-card {
      width: 30px;
      height: 30px;

      top: 18px;
      left: 18px;

      color: #C00;

      background: none;

      border: none;

      z-index: 1;
    }
  }

  .activities {
    width: 100%;
    height: 100%;

    position: absolute;
    top: 0;
    left: 200%;

    color: #FFF;

    border: none;
    border-radius: 100%;

    opacity: 0;

    transition: left 1ms $activities-fade-out, opacity $activities-fade-out;

    z-index: 3;
  }

  &.show-activities {
    button {
      &.show-activities {
        right: -66px;

        color: transparent;

        box-shadow: 0 0 0 700px $primary;

        transition: right 1ms ($activities-transition-in - 1ms), color $activities-transition-in, box-shadow $activities-transition-in;
      }

      &.hide-activities {
        right: 18px;

        transition: right $activities-fade-in $activities-transition-in;
      }
    }

    .activities {
      left: 0;

      opacity: 1;

      transition: left 1ms $activities-transition-in, opacity $activities-fade-in $activities-transition-in;
    }
  }

  &.saved {
    button {
      &.save-card {
        //color: #FFF;

        //background-color: #C00;
      }
    }
  }

  .card-contents {
    width: 100%;
    max-height: 100%;
    padding: 48px 36px;

    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;

    position: relative;

    z-index: 1;

    h1 {
      font-size: 3rem;
    }

    h2 {
      font-size: 2rem;
    }

    h3 {
      font-size: 1.8rem;
    }

    h4 {
      font-size: 1.6rem;
    }

    h5 {
      font-size: 1.5rem;
    }

    p {
      padding-top: 1rem;

      font-size: 1.4rem;
    }
  }
}